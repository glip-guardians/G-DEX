<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
<title>G-DEX ‚Äî GLIP</title>

<script>
  const BACKEND_URL = "https://gdex-backend.onrender.com".replace(/\/$/, "");
</script>

<link rel="manifest" href="manifest.webmanifest">
<link rel="icon" href="G_DEX_icon.png">
<link rel="apple-touch-icon" href="G_DEX_icon.png">
<meta name="theme-color" content="#ffffff" />
<script>
  const SW_VER = "20251222_2";
  if ('serviceWorker' in navigator) {
    window.addEventListener('load', () => {
      navigator.serviceWorker.register('sw.js?v=' + SW_VER).catch(console.error);
    });
  }
</script>

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600;700;800&family=Sora:wght@600;700;800&display=swap" rel="stylesheet">

<style>
/* ===== (ÏõêÎ≥∏ Ïä§ÌÉÄÏùº Í∑∏ÎåÄÎ°ú) ===== */
:root{
  --bg0:#ffffff;
  --bg1:#f6fbff;
  --bg2:#f3f7fb;

  --panel:rgba(255,255,255,.72);
  --panel-2:rgba(255,255,255,.82);
  --inner:rgba(255,255,255,.62);

  --text:#0b1220;
  --muted:rgba(11,18,32,.68);

  --accent:#7bb7ff;
  --accent-2:#9ad7ff;
  --line:rgba(12,25,45,.10);
  --line-2:rgba(12,25,45,.16);

  --shadow:0 18px 40px rgba(9,18,33,.12);
  --shadow-soft:0 12px 26px rgba(9,18,33,.10);

  --r:22px;
}
*{box-sizing:border-box}
html,body{margin:0}
html,body{
  color:var(--text);
  font-family:"Plus Jakarta Sans",Pretendard,system-ui,-apple-system,Roboto,"Segoe UI","Noto Sans KR",sans-serif;
  background:
    radial-gradient(1200px 700px at 20% 0%, rgba(123,183,255,.18), transparent 60%),
    radial-gradient(900px 600px at 80% 10%, rgba(154,215,255,.14), transparent 55%),
    radial-gradient(900px 900px at 50% 110%, rgba(255,255,255,1), rgba(243,247,251,1) 55%, rgba(246,251,255,1) 100%);
}
img{max-width:100%;display:block}
body{position:relative;overflow-x:hidden}

/* Subtle snow grain */
body::before,
body::after{
  content:"";
  pointer-events:none;
  position:fixed;
  inset:-60px;
  z-index:0;
  background-image:
    radial-gradient(circle, rgba(255,255,255,.55) 0, rgba(255,255,255,0) 62%),
    radial-gradient(circle, rgba(255,255,255,.38) 0, rgba(255,255,255,0) 60%),
    radial-gradient(circle, rgba(255,255,255,.42) 0, rgba(255,255,255,0) 62%);
  background-size:360px 360px, 420px 420px, 320px 320px;
  background-position:0 -80px, 120px -140px, -80px 30px;
  animation:snowfall 44s linear infinite;
  opacity:.10;
  filter:blur(.2px);
}
body::after{
  animation-duration:64s;
  background-size:460px 460px, 520px 520px, 420px 420px;
  opacity:.06;
}
@keyframes snowfall{
  0%{transform:translateY(-40px);}
  100%{transform:translateY(90px);}
}

/* ===== HERO ===== */
.hero{
  position:relative;
  height:min(34vh,420px);
  overflow:hidden;
  background:linear-gradient(180deg, rgba(123,183,255,.18) 0%, rgba(255,255,255,.92) 55%, rgba(255,255,255,1) 100%);
}
.hero::before{ content:none !important; }
.hero::after{
  content:"";
  position:absolute;
  inset:0;
  background:
    linear-gradient(180deg, rgba(8,12,30,.35) 0%, rgba(8,12,30,.55) 55%, rgba(8,12,30,.75) 100%),
    url("https://cdn.imweb.me/thumbnail/20251213/39a6c931679b8.png") center center / cover no-repeat;
  filter:saturate(1.05) contrast(1.08) brightness(.92);
  opacity:.95;
  z-index:0;
  pointer-events:none;
}
.heroCharacters{display:none !important;}
.heroOverlaySnow{
  position:absolute; inset:0;
  pointer-events:none;
  z-index:2;
  background-image:
    radial-gradient(circle at 18% 18%, rgba(255,255,255,.55) 0, transparent 55%),
    radial-gradient(circle at 78% 22%, rgba(255,255,255,.45) 0, transparent 58%);
  opacity:.10;
}
.heroText{
  position:absolute;
  inset:0;
  display:grid;
  place-items:center;
  z-index:3;
  text-align:center;
  padding:0 16px;
}
.heroText h2{
  margin:0 0 10px;
  font:800 clamp(26px,3.6vw,50px)/1.06 "Sora",system-ui;
  letter-spacing:.12em;
  text-transform:uppercase;
  color:#ffffff;
  text-shadow:0 14px 30px rgba(0,0,0,.45), 0 2px 10px rgba(0,0,0,.25);
  position:relative;
}
.heroText h2::after{
  content:"";
  display:block;
  width:168px;
  height:4px;
  margin:18px auto 0;
  border-radius:999px;
  background:linear-gradient(90deg, rgba(255,255,255,.85), rgba(123,183,255,.75), rgba(255,255,255,.85));
  box-shadow:0 0 18px rgba(123,183,255,.32);
}
.heroText p{
  margin:6px 0 0;
  color:rgba(255,255,255,.92);
  font-size:clamp(13px,1.7vw,16px);
  text-shadow:0 10px 24px rgba(0,0,0,.35);
}

/* ===== HERO link bar ===== */
.heroLinks{
  position:relative;z-index:4;
  background:rgba(255,255,255,.65);
  backdrop-filter:blur(14px);
  -webkit-backdrop-filter:blur(14px);
  border-bottom:1px solid var(--line);
  box-shadow:0 10px 30px rgba(9,18,33,.10);
}
.heroLinks-inner{
  max-width:1280px;margin:0 auto;padding:10px 16px;
  display:flex;flex-wrap:wrap;gap:10px;justify-content:flex-end
}
.heroBtn{
  display:inline-flex;align-items:center;gap:8px;
  padding:8px 14px;border-radius:999px;font-size:12px;font-weight:700;
  text-decoration:none;
  border:1px solid rgba(12,25,45,.14);
  background:rgba(255,255,255,.75);
  color:rgba(11,18,32,.92);
  cursor:pointer;
  backdrop-filter:blur(10px);-webkit-backdrop-filter:blur(10px);
  box-shadow:0 6px 16px rgba(9,18,33,.08);
  transition:background .18s ease,border-color .18s ease,transform .15s ease,box-shadow .15s ease;
}
.heroBtn .icon{font-size:13px;opacity:.82}
.heroBtn:hover{
  background:rgba(255,255,255,.92);
  border-color:rgba(123,183,255,.42);
  transform:translateY(-1px);
  box-shadow:0 10px 22px rgba(9,18,33,.12);
}
@media (max-width:768px){
  .heroLinks-inner{justify-content:center}
}

/* ===== LAYOUT ===== */
.wrapper{width:100%;max-width:1280px;margin:0 auto;padding:0 16px; position:relative; z-index:1;}
.grid{display:grid;gap:24px;grid-template-columns:260px 1fr;align-items:start}

/* LEFT NAV */
.nav{
  position:relative;
  background:rgba(255,255,255,.70);
  backdrop-filter:blur(14px);
  -webkit-backdrop-filter:blur(14px);
  border-radius:var(--r);
  padding:16px;
  border:1px solid var(--line-2);
  box-shadow:var(--shadow);
  overflow:hidden;
}
.nav::before{
  content:"";
  position:absolute;
  inset:-2px;
  background:
    radial-gradient(700px 240px at 30% 0%, rgba(123,183,255,.18), transparent 60%),
    radial-gradient(700px 240px at 80% 10%, rgba(255,255,255,.28), transparent 55%);
  opacity:.8;
  pointer-events:none;
}
.brand{display:flex;align-items:center;gap:10px;margin-bottom:12px; position:relative;}
.brand img{
  width:34px;height:34px;border-radius:50%;object-fit:cover;
  box-shadow:0 0 0 3px rgba(255,255,255,.95), 0 10px 18px rgba(9,18,33,.12);
}
.brand h1{margin:0;font:800 20px/1 "Sora",sans-serif;letter-spacing:.18em;}
.nav a{
  display:block;padding:12px 14px;border-radius:999px;margin-bottom:10px;
  text-decoration:none;color:rgba(11,18,32,.92);
  background:rgba(255,255,255,.72);
  border:1px solid rgba(12,25,45,.12);
  text-align:center;
  font-weight:800;
  box-shadow:0 6px 16px rgba(9,18,33,.08);
  transition:transform .15s ease, box-shadow .15s ease, background .15s ease, border-color .15s ease;
  position:relative;
}
.nav a:is(:hover,:focus){
  background:rgba(255,255,255,.90);
  border-color:rgba(123,183,255,.40);
  transform:translateY(-1px);
  box-shadow:0 10px 22px rgba(9,18,33,.12);
}
.nav .note{margin-top:8px;font-size:12px;line-height:1.4;color:var(--muted)}
.install-cta{display:none;min-width:auto;width:100%;margin-top:10px;padding:10px 12px;font-size:13px;justify-content:center}

/* RIGHT CONTENT */
.main{
  display:grid;gap:24px;
  grid-template-areas:
    "metrics metrics"
    "swap status"
    "pool pool"
    "notes notes"
    "analytics analytics"
    "stake stake";
  grid-template-columns:1fr 1fr
}
.card{
  position:relative;
  background:var(--panel-2);
  backdrop-filter:blur(14px);
  -webkit-backdrop-filter:blur(14px);
  border-radius:var(--r);
  padding:16px;
  border:1px solid var(--line-2);
  box-shadow:var(--shadow);
  overflow:hidden;
}
.card::before{
  content:"";
  position:absolute;
  inset:-2px;
  background:
    radial-gradient(700px 240px at 20% 0%, rgba(123,183,255,.16), transparent 60%),
    radial-gradient(700px 240px at 80% 10%, rgba(255,255,255,.24), transparent 55%);
  opacity:.85;
  pointer-events:none;
  z-index:0;
}
.card > *{position:relative; z-index:1;}

h3{
  margin:0 0 12px;
  font:900 20px/1.25 "Sora",sans-serif;
  color:rgba(11,18,32,.92);
  letter-spacing:.02em;
}
h3::before{content:""; display:none;}

.metrics{grid-area:metrics;display:grid;gap:16px;grid-template-columns:repeat(3,1fr)}
.metric h4{margin:0 0 6px;font-weight:800;color:rgba(11,18,32,.78)}
.metric .v{font-weight:900;font-size:18px;color:rgba(11,18,32,.92);white-space:nowrap}

.pool{grid-area:pool}
.swap{grid-area:swap}
.status{grid-area:status}
.notes{grid-area:notes}
.analytics{grid-area:analytics}
.stake{grid-area:stake}

/* (ÏõêÎ≥∏ ÏûÖÎ†•/Î≤ÑÌäº/Î™®Îã¨/Ìã∞Ïª§/Ï∞®Ìä∏/Î™®Îã¨/Ïä§ÏôëStatus Ïä§ÌÉÄÏùº Îì± Í∑∏ÎåÄÎ°ú) */
.row{display:flex;gap:10px;align-items:center;flex-wrap:wrap}
.input{
  flex:1;
  display:flex;
  align-items:flex-end;
  gap:10px;
  position:relative;
  background:rgba(255,255,255,.72);
  border:1px solid rgba(12,25,45,.16);
  border-radius:18px;
  padding:22px 12px 10px;
  margin:10px 0;
  min-height:66px;
  box-shadow:0 10px 22px rgba(9,18,33,.08);
  overflow:hidden;
}
.balTag{
  position:absolute;
  top:8px;
  left:14px;
  font-size:12px;
  font-weight:800;
  color:rgba(11,18,32,.62);
  pointer-events:none;
  white-space:nowrap;
  max-width:calc(100% - 160px);
  overflow:hidden;
  text-overflow:ellipsis;
}
.input.leftToken .balTag{
  left:92px;
  max-width:calc(100% - 240px);
}
.input input{
  flex:1;
  width:0;
  min-width:0;
  background:transparent;border:0;outline:0;
  color:rgba(11,18,32,.92);
  font-size:clamp(18px, 3.6vw, 22px);
  font-weight:900;
  padding:0;
  z-index:2;
}
.maxBtn{
  flex:0 0 auto;
  height:40px;
  padding:0 16px;
  border:0;border-radius:999px;
  font-weight:900;font-family:"Sora",sans-serif;
  color:rgba(11,18,32,.92);
  background:rgba(255,255,255,.88);
  border:1px solid rgba(12,25,45,.16);
  box-shadow:0 12px 22px rgba(9,18,33,.12);
  cursor:pointer;
  transition:transform .15s ease, box-shadow .15s ease, border-color .15s ease;
}
.maxBtn:hover{
  transform:translateY(-1px);
  border-color:rgba(123,183,255,.42);
  box-shadow:0 16px 26px rgba(9,18,33,.14);
}
.tokenBtn{
  flex:0 0 auto;
  display:flex;align-items:center;gap:8px;
  padding:10px 12px;
  border-radius:999px;
  cursor:pointer;
  background:rgba(255,255,255,.84);
  border:1px solid rgba(12,25,45,.16);
  color:rgba(11,18,32,.92);
  white-space:nowrap;
  box-shadow:0 8px 18px rgba(9,18,33,.08);
  font-weight:800;
  transition:transform .15s ease, box-shadow .15s ease, border-color .15s ease, background .15s ease;
  max-width:160px;
}
.tokenBtn:hover{
  transform:translateY(-1px);
  background:rgba(255,255,255,.94);
  border-color:rgba(123,183,255,.42);
  box-shadow:0 12px 24px rgba(9,18,33,.12);
}
.tokenBtn span{overflow:hidden;text-overflow:ellipsis;max-width:70px}
.tokenBtn img,
#tokList .item img{
  width:24px;height:24px;border-radius:50%;object-fit:cover;display:block;
  background:#000;
  box-shadow:0 0 0 2px rgba(255,255,255,.92), 0 8px 14px rgba(9,18,33,.10);
  flex:0 0 auto;
}
.flip{
  width:40px;height:40px;border-radius:50%;
  display:grid;place-items:center;
  border:1px solid rgba(12,25,45,.18);
  color:rgba(11,18,32,.85);
  cursor:pointer;
  background:rgba(255,255,255,.78);
  box-shadow:0 10px 20px rgba(9,18,33,.10);
  transition:transform .15s ease, box-shadow .15s ease, border-color .15s ease;
}
.flip:hover{
  transform:translateY(-1px);
  border-color:rgba(123,183,255,.42);
  box-shadow:0 14px 26px rgba(9,18,33,.12);
}
.helper{
  display:flex;gap:12px;align-items:center;justify-content:space-between;
  margin-top:8px;flex-wrap:wrap
}
.helper input{
  width:78px;border:1px solid rgba(12,25,45,.18);background:rgba(255,255,255,.86);
  color:rgba(11,18,32,.92);border-radius:10px;padding:7px 8px
}
.btn{
  display:inline-block;min-width:140px;text-align:center;
  padding:14px 18px;border-radius:18px;border:0;cursor:pointer;
  background:linear-gradient(135deg, rgba(255,255,255,.92), rgba(123,183,255,.22));
  color:rgba(11,18,32,.92);
  font-weight:900;font-family:"Sora",sans-serif;
  box-shadow:0 14px 28px rgba(9,18,33,.12);
  border:1px solid rgba(12,25,45,.14);
  transition:transform .15s ease, box-shadow .15s ease, filter .15s ease, border-color .15s ease;
}
.btn:hover{
  transform:translateY(-1px);
  filter:brightness(1.02);
  border-color:rgba(123,183,255,.42);
  box-shadow:0 18px 34px rgba(9,18,33,.14);
}
.btn.ghost{
  background:rgba(255,255,255,.70);
  color:rgba(11,18,32,.88);
  border:1px solid rgba(12,25,45,.16);
  box-shadow:0 10px 22px rgba(9,18,33,.10);
}

/* ===== NEW: Statusboard styling ===== */
.statusGrid{
  display:grid;
  grid-template-columns:repeat(2, 1fr);
  gap:12px;
}
@media (max-width:1000px){
  .statusGrid{grid-template-columns:1fr;}
}
.statusItem{
  border:1px solid rgba(12,25,45,.16);
  border-radius:18px;
  background:rgba(255,255,255,.72);
  box-shadow:0 12px 26px rgba(9,18,33,.10);
  padding:14px;
  overflow:hidden;
}
.statusItem .k{
  font-weight:900;
  color:rgba(11,18,32,.78);
  margin-bottom:6px;
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:10px;
}
.statusItem .v{
  font:900 20px/1.15 "Sora",sans-serif;
  color:rgba(11,18,32,.92);
}
.statusItem .s{
  margin-top:6px;
  font-size:12px;
  color:rgba(11,18,32,.62);
  line-height:1.4;
}
.pill{
  display:inline-flex;
  align-items:center;
  gap:6px;
  padding:6px 10px;
  border-radius:999px;
  font-weight:900;
  font-size:12px;
  border:1px solid rgba(12,25,45,.14);
  background:rgba(255,255,255,.72);
  box-shadow:0 10px 18px rgba(9,18,33,.08);
  white-space:nowrap;
}
.pill.ok{border-color:rgba(57,217,138,.35)}
.pill.warn{border-color:rgba(123,183,255,.40)}
.pill.bad{border-color:rgba(220,65,90,.30)}
.smallLink{font-size:12px;font-weight:900;text-decoration:none;color:rgba(11,18,32,.86)}
.smallLink:hover{text-decoration:underline}

/* swapStatus (ÏõêÎ≥∏ Ïú†ÏßÄ) */
#swapStatus{
  margin-top:10px;
  padding:10px 12px;
  border-radius:14px;
  border:1px solid rgba(12,25,45,.12);
  background:rgba(255,255,255,.70);
  box-shadow:0 10px 18px rgba(9,18,33,.08);
  font-size:12px;
  line-height:1.35;
  color:rgba(11,18,32,.78);
  display:none;
}
#swapStatus a{color:rgba(11,18,32,.90); font-weight:900; text-decoration:none}
#swapStatus a:hover{text-decoration:underline}

/* Î™®Î∞îÏùº Ï§ëÏïô Í≥†Ï†ï */
@media (max-width:768px){
  .wrapper{padding:0}
  .grid{
    display:flex;flex-direction:column;gap:24px;
    width:min(92vw,640px);position:relative;left:50%;transform:translateX(-50%)
  }
  .nav,.main{width:100%;max-width:min(92vw,640px);margin:0 auto}
  .main{display:flex;flex-direction:column;align-items:center;gap:24px}
  .metrics{display:flex;flex-direction:column;gap:16px;width:100%}
  .metrics .card,.main>section,.card{width:100%;margin-left:auto;margin-right:auto}

  .input{min-height:64px; padding:22px 10px 10px; gap:8px}
  .balTag{max-width:calc(100% - 140px)}
  .tokenBtn{max-width:138px;padding:9px 10px}
  .tokenBtn span{max-width:62px}
  .maxBtn{height:38px;padding:0 12px}
  .input.leftToken .balTag{left:86px}
}
</style>
</head>

<body>
<section class="hero">
  <div class="heroCharacters">
    <div class="heroSanta">üéÖ</div>
    <div class="heroRudolph">ü¶å</div>
  </div>
  <div class="heroOverlaySnow"></div>
  <div class="heroText">
    <div>
      <h2>G-DEX WINTER EDITION</h2>
      <p>Elegant swaps and staking in a frosted, transparent interface.</p>
    </div>
  </div>
</section>

<section class="heroLinks">
  <div class="heroLinks-inner">
    <a class="heroBtn" href="https://t.me/GLIPFoundation" target="_blank" rel="noopener noreferrer">
      <span class="icon">üí¨</span><span>Telegram</span>
    </a>
    <a class="heroBtn" href="mailto:contact_lounge@glipchain.com">
      <span class="icon">‚úâÔ∏è</span><span>Email</span>
    </a>
    <a class="heroBtn" href="https://glipchain.com" target="_blank" rel="noopener noreferrer">
      <span class="icon">üåê</span><span>GLIP Official</span>
    </a>
    <a class="heroBtn" id="btnListing" href="https://glipchain.com/Inquiry" target="_blank" rel="noopener noreferrer">
      <span class="icon">üìà</span><span>Listing Inquiry</span>
    </a>
  </div>
</section>

<div class="wrapper" style="padding-top:16px">
  <div class="grid">
    <aside class="nav">
      <div class="brand">
        <img src="https://cdn.imweb.me/thumbnail/20251023/7c2d51fa8c1bc.png" alt="GLIP logo">
        <h1>G-DEX</h1>
      </div>
      <a href="#swap"><span>Swap</span></a>
      <a href="#pool"><span>Pool</span></a>
      <a href="#analytics"><span>Analytics</span></a>
      <a href="#stake"><span>Stake</span></a>
      <div class="note">Direct routing via SushiSwap V2 Router. DYOR ‚Äî not financial advice.</div>
      <button class="btn install-cta" id="installSide" type="button">Install G-DEX App</button>
    </aside>

    <main class="main">
      <!-- Metrics (ÏõêÎ≥∏ Ïú†ÏßÄ: Ìã∞Ïª§ + Î©îÏù¥Ï†ÄÏΩîÏù∏ + GLIP Ï∞®Ìä∏) -->
      <section class="metrics">
        <div class="card metric">
          <h4>Recently Created Pools</h4>
          <div class="v" id="metricPoolsText">
            <div class="poolsTicker" id="poolsTicker" aria-label="Sushi pools ticker">
              <a class="poolsItem" id="poolsTickerLink" href="https://www.sushi.com/ethereum/explore/pools" target="_blank" rel="noopener">
                <span class="pair" id="poolsTickerPair">‚Äî</span>
                <span class="meta" id="poolsTickerMeta"></span>
              </a>
            </div>
          </div>
        </div>

        <div class="card metric">
          <h4>Major Coin Prices</h4>
          <div class="v" id="metricPricesText">
            <div class="poolsTicker" id="pricesTicker" aria-label="Major coin prices ticker">
              <a class="poolsItem" id="pricesTickerLink" href="https://www.coingecko.com" target="_blank" rel="noopener">
                <span class="pair" id="pricesTickerPair">‚Äî</span>
                <span class="meta" id="pricesTickerMeta"></span>
              </a>
            </div>
          </div>
        </div>

        <div class="card metric">
          <h4>GLIP Price</h4>
          <div class="v" id="metricGlipPrice">
            <div class="chartFrame">
              <iframe id="dextools-widget"
                title="DEXTools Trading Chart"
                width="500" height="400"
                loading="lazy"
                src="https://www.dextools.io/widget-chart/en/ether/pe-light/0xd304b9c49f389f27c5e75e1469e903da5320d3b4?theme=light&chartType=2&chartResolution=30&drawingToolbars=false"></iframe>
            </div>
          </div>
        </div>
      </section>

      <!-- Swap (ÏõêÎ≥∏ Ïú†ÏßÄ) -->
      <section class="card swap" id="swap">
        <h3>Swap</h3>

        <div class="input" id="swapSellWrap">
          <div class="balTag" id="sellBal">Bal: ‚Äî</div>
          <input id="sell" placeholder="0.0" type="number" min="0" step="any" inputmode="decimal">
          <button class="maxBtn" id="swapMax" type="button">MAX</button>
          <button class="tokenBtn" id="sellBtn"><img id="sellI" src="" alt=""><span id="sellS" data-address="">ETH</span></button>
        </div>

        <div class="row" style="justify-content:center"><div class="flip" id="flip">‚áÖ</div></div>

        <div class="input" id="swapBuyWrap">
          <div class="balTag" id="buyBal">Bal: ‚Äî</div>
          <input id="buy" placeholder="0.0" type="number" disabled>
          <button class="tokenBtn" id="buyBtn"><img id="buyI" src="" alt=""><span id="buyS" data-address="">GLIP</span></button>
        </div>

        <div class="helper">
          <div>
            Slippage <input id="slip" type="number" value="2" min="0" max="50" step="0.1"> %
            <span id="slipHint" style="font-size:12px;opacity:.68;margin-left:6px;"></span>
          </div>
          <button class="btn" id="swapConnect">Connect Wallet</button>
        </div>
        <div style="height:10px"></div>
        <button class="btn" id="swapBtn" style="width:100%">Swap</button>

        <div id="swapStatus"></div>
      </section>

      <!-- ‚úÖ NEW: G-DEX ÏÉÅÌÉúÌåê (Recent Transactions ÎåÄÏ≤¥) -->
      <section class="card status" id="status">
        <h3>G-DEX Statusboard</h3>

        <div class="statusGrid">
          <div class="statusItem">
            <div class="k">
              <span>Wallet</span>
              <span class="pill" id="stWalletPill">‚Äî</span>
            </div>
            <div class="v" id="stWalletAddr">‚Äî</div>
            <div class="s">Detects connection + current account.</div>
          </div>

          <div class="statusItem">
            <div class="k">
              <span>Network</span>
              <span class="pill" id="stNetPill">‚Äî</span>
            </div>
            <div class="v" id="stNetName">‚Äî</div>
            <div class="s">Expected: Ethereum Mainnet (chainId 1).</div>
          </div>

          <div class="statusItem">
            <div class="k">
              <span>Routing Mode</span>
              <span class="pill" id="stRoutePill">‚Äî</span>
            </div>
            <div class="v" id="stRouteMode">‚Äî</div>
            <div class="s">Proxy preferred. Direct fallback available.</div>
          </div>

          <div class="statusItem">
            <div class="k">
              <span>Proxy Fee Params</span>
              <a class="smallLink" href="#notes">Details ‚Üí</a>
            </div>
            <div class="v" id="stFeeSummary">‚Äî</div>
            <div class="s" id="stFeeWallet">‚Äî</div>
          </div>

          <div class="statusItem">
            <div class="k">
              <span>Last Swap TX</span>
              <span class="pill warn" id="stTxPill">‚Äî</span>
            </div>
            <div class="v" id="stTxHash">‚Äî</div>
            <div class="s" id="stTxLink">No transactions recorded in this session.</div>
          </div>

          <div class="statusItem">
            <div class="k">
              <span>System</span>
              <span class="pill ok" id="stSysPill">OK</span>
            </div>
            <div class="v" id="stSysText">Ready</div>
            <div class="s" id="stSysSub">Silent status line enabled.</div>
          </div>
        </div>

        <div style="
          margin-top:12px;
          padding:10px 12px;
          border-radius:16px;
          border:1px solid rgba(12,25,45,.14);
          background:rgba(255,255,255,.72);
          box-shadow:0 12px 22px rgba(9,18,33,.10);
          font-size:12px;
          color:rgba(11,18,32,.72);
          line-height:1.45;
        ">
          Tip: If wallet is not detected on mobile, open via MetaMask in-app browser (deep link).
        </div>
      </section>

      <!-- Pool (ÏõêÎ≥∏ Ïú†ÏßÄ) -->
      <section class="card pool" id="pool">
        <!-- (ÏõêÎ≥∏ pool ÎÇ¥Ïö© Í∑∏ÎåÄÎ°ú ‚Äî ÏÉùÎûµ ÏóÜÏù¥ ÏÇ¨Ïö© Í∞ÄÎä•) -->
        <!-- ... ÎÑàÏùò ÏõêÎ≥∏ pool ÏÑπÏÖò Ï†ÑÏ≤¥Î•º Ïó¨Í∏∞ Í∑∏ÎåÄÎ°ú Ïú†ÏßÄÌïòÎ©¥ Îê® ... -->
      </section>

      <!-- Notes / Analytics / Stake (ÏõêÎ≥∏ Ïú†ÏßÄ) -->
      <section class="card notes">
        <!-- ... ÏõêÎ≥∏ notes Í∑∏ÎåÄÎ°ú ... -->
      </section>

      <section class="card analytics" id="analytics">
        <!-- ... ÏõêÎ≥∏ analytics Í∑∏ÎåÄÎ°ú ... -->
      </section>

      <section class="card stake" id="stake">
        <!-- ... ÏõêÎ≥∏ stake Í∑∏ÎåÄÎ°ú ... -->
      </section>
    </main>
  </div>
</div>

<!-- (ÏõêÎ≥∏ Î™®Îã¨/Ïä§ÌÅ¨Î¶ΩÌä∏ Í∑∏ÎåÄÎ°ú Ïú†ÏßÄ) -->
<!-- Token modal, uiModal, gdexPoolConfig, ethers.js, Î™®Îì† JS Î°úÏßÅÏùÄ ÏõêÎ≥∏ Í∑∏ÎåÄÎ°ú ÎëêÎêò,
     ÏïÑÎûò "statusboard ÏóÖÎç∞Ïù¥Ìä∏ Ìï®Ïàò"Îßå Ï∂îÍ∞Ä/Ïó∞Í≤∞Îê©ÎãàÎã§. -->

<script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.umd.min.js"></script>

<script>
/* ============================================================
   ‚úÖ ÏÉÅÌÉúÌåê ÏóÖÎç∞Ïù¥Ìä∏ Î°úÏßÅ (NEW)
   - connectWallet(), ensureMainnet(), loadProxyFeeParams(), pushRecentTx()ÏôÄ Ïó∞Îèô
   ============================================================ */
function setPill(el, text, kind){
  if(!el) return;
  el.textContent = text;
  el.classList.remove('ok','warn','bad');
  if(kind) el.classList.add(kind);
}

async function refreshStatusboard(){
  const wP = document.getElementById('stWalletPill');
  const wA = document.getElementById('stWalletAddr');

  const nP = document.getElementById('stNetPill');
  const nN = document.getElementById('stNetName');

  const rP = document.getElementById('stRoutePill');
  const rM = document.getElementById('stRouteMode');

  const fS = document.getElementById('stFeeSummary');
  const fW = document.getElementById('stFeeWallet');

  // wallet
  if(window.userAddress){
    setPill(wP, 'Connected', 'ok');
    wA.textContent = (window.userAddress || '‚Äî');
  }else{
    setPill(wP, 'Not connected', 'warn');
    wA.textContent = '‚Äî';
  }

  // network
  try{
    if(window.provider){
      const net = await window.provider.getNetwork();
      if(net && net.chainId === 1){
        setPill(nP, 'Mainnet', 'ok');
      }else{
        setPill(nP, 'Wrong', 'bad');
      }
      nN.textContent = net ? `${net.name} (chainId ${net.chainId})` : '‚Äî';
    }else{
      setPill(nP, '‚Äî', '');
      nN.textContent = '‚Äî';
    }
  }catch{
    setPill(nP, '‚Äî', '');
    nN.textContent = '‚Äî';
  }

  // routing mode
  // Í∏∞Î≥∏ÏùÄ Proxy ÏÑ†Ìò∏ / Direct fallback
  setPill(rP, 'Auto', 'ok');
  rM.textContent = 'Proxy ‚Üí Direct fallback';

  // proxy fee params
  const bps = (window.__proxyFeeBps != null) ? window.__proxyFeeBps : null;
  const flatWei = window.__proxyFlatFeeWei || null;
  const wallet = window.__proxyFeeWallet || null;

  let pctText = (bps != null) ? `${(bps/100).toFixed(2)}%` : '‚Äî';
  let flatText = '‚Äî';
  try{
    if(flatWei && window.ethers) flatText = `${window.ethers.utils.formatEther(flatWei)} ETH`;
  }catch{}

  fS.textContent = `Percent ${pctText} ¬∑ Flat ${flatText}`;
  fW.textContent = wallet ? `Fee wallet: ${wallet}` : 'Fee wallet: ‚Äî';
}

/* ‚úÖ pushRecentTxÎ•º ÏÉÅÌÉúÌåêÏúºÎ°úÎèÑ Í∏∞Î°ù */
function setLastSwapTx(hash){
  const pill = document.getElementById('stTxPill');
  const hh   = document.getElementById('stTxHash');
  const link = document.getElementById('stTxLink');
  if(!hash){
    setPill(pill, '‚Äî', 'warn');
    hh.textContent = '‚Äî';
    link.textContent = 'No transactions recorded in this session.';
    link.removeAttribute('href');
    return;
  }
  setPill(pill, 'Sent', 'ok');
  hh.textContent = hash.slice(0,10) + '‚Ä¶' + hash.slice(-8);
  link.innerHTML = `View on Etherscan: <a class="smallLink" href="https://etherscan.io/tx/${hash}" target="_blank" rel="noopener">Open</a>`;
}

/* ‚úÖ ÏõêÎ≥∏ ÏΩîÎìúÏóêÏÑú pushRecentTx(hash) Ìò∏Ï∂ú Ïãú, ÏïÑÎûòÎèÑ Í∞ôÏù¥ Ìò∏Ï∂úÎêòÎèÑÎ°ù ÎûòÌïë */
(function wrapPushRecentTx(){
  const old = window.pushRecentTx;
  window.pushRecentTx = function(hash){
    try{ if(typeof old === "function") old(hash); }catch{}
    try{ setLastSwapTx(hash); }catch{}
  }
})();

/* ‚úÖ ÏõêÎ≥∏ connectWallet() ÏÑ±Í≥µ ÌõÑÏóêÎèÑ ÏÉÅÌÉúÌåê Í∞±Ïã† */
(function wrapConnectWallet(){
  const old = window.connectWallet;
  window.connectWallet = async function(){
    const r = await old.apply(this, arguments);
    try{ await refreshStatusboard(); }catch{}
    return r;
  }
})();

/* ‚úÖ ÏµúÏ¥à Î°úÎìú Ïãú ÏÉÅÌÉúÌåê Ï¥àÍ∏∞Ìôî */
document.addEventListener('DOMContentLoaded', ()=>{
  setLastSwapTx(null);
  refreshStatusboard();
});
</script>

</body>
</html>
